<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" style="overflow-x:hidden">
<head th:include="plugins/include_javascript::js"></head>
<link type="text/css" rel="stylesheet" th:href="@{/css/pages/back/menu.css}"/>
<style type="text/css">
    #typeDiv input, #xietiaoDiv input {
        width: 4rem;
    }
</style>
<script type="text/javascript" th:src="@{/js/pages/back/index.js}"></script>
<script type="text/javascript ">

    $(function () {
        $("[name=type]").click(function () {
            if (this.value == '其他') {
                $("#projectid").attr("disabled", "")
            } else {
                $("#projectid").attr("disabled", false)
            }
        });
        $("#formDiv").validate({
            debug: true, // 取消表单的提交操作
            submitHandler: function (form) {
                $.post("/pages/back/log/add", $(form).serializeArray(), function (res) {
                    if (res) {
                        $("#note").val("");
                        showAlert($("#successMsg"),"日志添加成功！");
                    } else {
                        showAlert($("#failureMsg"),"日志添加失败！");

                    }
                }, "json")


            },
            errorPlacement: function (error, element) {
                $("#" + $(element).attr("id") + "Msg").append(error);
            },
            highlight: function (element, errorClass) {
                $(element).fadeOut(1, function () {
                    $(element).fadeIn(1, function () {
                        $(element).css({
                            "box-shadow": "0 0 10px rgba(255,0,0,1)"
                        })
                    });

                })
            },
            unhighlight: function (element, errorClass) {
                $(element).fadeOut(1, function () {
                    $(element).fadeIn(1, function () {
                        $(element).css({
                            "box-shadow": "0 0 10px rgba(0,255,0,1)"
                        });
                    });
                })
            },
            errorClass: "text-danger",
            messages: {
                note: "内容不能为空"

            },
            rules: {
                note: {
                    required: true
                }

            }
        });

    })


</script>
<body style="overflow-x:hidden;visibility: hidden" id="body">
<div class="container-fluid">
    <div th:replace="plugins/head_menu::head_menu"></div><!--引入写好的头部和左侧信息-->
    <div id="contentDiv"><!--这里是主体-->
        <div style="text-align: center;font-size: 4rem">添加日志</div>
        <div class="row">
            <div class="col-xs-10 col-xs-push-1 " style="border: solid #d3d3d3 1px;border-radius: 5px;">
                <form class="form" id="formDiv" method="post">
                    <div class="form-inline form-group" id="typeDiv">
                        <label>类型：</label>
                        <div style="display: inline-block">
                            <input type="radio" class="form-control" name="type" value="实施"
                                   th:checked="true"/>
                            <div style="text-align: center">实施</div>
                        </div>
                        <div style="display: inline-block">
                            <input type="radio" class="form-control" name="type" value="配合"/>
                            <div style="text-align: center">配合</div>

                        </div>
                        <div style="display: inline-block">
                            <input type="radio" class="form-control" name="type" value="其他"/>
                            <div style="text-align: center">其他</div>

                        </div>
                    </div>
                    <div class="form-inline form-group ">
                        <label>项目：</label>
                        <select class="form-control" name="projectid" id="projectid">
                            <option th:each="p:${allProject}" th:value="${p.projectid}" th:text="${p.contract.companyName}+'-'+
                            ${p.name}+'【'+${p.type=='qt'?'其他':p.type=='px'?'培训':p.type=='gk'?'挂靠':p.type=='zz'?'资质':p.type=='dp'?'代评':''}+'】'">
                                大师傅大师师傅大师师傅大师师傅大师傅
                            </option>
                        </select>
                    </div>
                    <div class="form-inline form-group ">
                        <label>内容：</label>
                        <textarea style="min-width: 30rem;height: 18rem" class="form-control" id="note" name="note"
                                  placeholder="请输入内容"></textarea>
                        <span th:id="noteMsg" style="margin-left: 2rem"></span>
                    </div>
                    <div class="form-inline form-group " id="xietiaoDiv">
                        <div style="display: inline-block">
                            <label>是否需协调：</label>
                        </div>
                        <div style="display: inline-block">
                            <input type="radio" class="form-control" name="coordination"
                                   value="是" th:checked="true"/>
                            <div style="text-align: center">是</div>
                        </div>
                        <div style="display: inline-block">
                            <input type="radio" class="form-control" name="coordination"
                                   value="否"/>
                            <div style="text-align: center">否</div>
                        </div>
                    </div>
                    <div class="form-inline form-group ">
                        <button type="submit" class="btn btn-success">确认添加</button>
                        <a th:href="@{/pages/back/loginSuccess}">
                            <button class="btn btn-danger" type="button">取消添加</button>
                        </a>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
</body>

</html>
